
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Academic and professional portfolio of Eduardo Furlan, a PhD candidate at INPE specializing in High-Performance Computing (HPC) for scientific and engineering challenges. Showcasing research, education, and industrial experience.">
      
      
        <meta name="author" content="Eduardo Furlan">
      
      
        <link rel="canonical" href="https://efurlanm.github.io/blog/2025/11/26/mbp-nix/">
      
      
        <link rel="prev" href="../../23/opti-scie-work/">
      
      
        <link rel="next" href="../../../12/03/hpc-fort-opti/">
      
      
        
      
      
      <link rel="icon" href="../../../../../assets/img/account-outline.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>The Guide to Stabilizing Linux on a MacBook Pro (Mid-2012) - Furlan</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/extra.css">
    
      <link rel="stylesheet" href="../../../../../assets/katex/katex.min.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="white">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#the-guide-to-stabilizing-linux-on-a-macbook-pro-mid-2012" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="Furlan" class="md-header__button md-logo" aria-label="Furlan" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 2a2 2 0 0 0-2 2 2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2m0 7c2.67 0 8 1.33 8 4v3H4v-3c0-2.67 5.33-4 8-4m0 1.9c-2.97 0-6.1 1.46-6.1 2.1v1.1h12.2V17c0-.64-3.13-2.1-6.1-2.1"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Furlan
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              The Guide to Stabilizing Linux on a MacBook Pro (Mid-2012)
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://www.github.com/efurlanm/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    efurlanm
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="Furlan" class="md-nav__button md-logo" aria-label="Furlan" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 2a2 2 0 0 0-2 2 2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2m0 7c2.67 0 8 1.33 8 4v3H4v-3c0-2.67 5.33-4 8-4m0 1.9c-2.97 0-6.1 1.46-6.1 2.1v1.1h12.2V17c0-.64-3.13-2.1-6.1-2.1"/></svg>

    </a>
    Furlan
  </label>
  
    <div class="md-nav__source">
      <a href="https://www.github.com/efurlanm/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    efurlanm
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../research/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Research
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../teaching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Teaching
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../engineering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Engineering
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Notes
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Blog
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Blog
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      <a href="../../../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Posts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Archive
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Archive
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2026/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2026
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2025
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2024
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2023/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2023
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Categories
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Categories
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/ann/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ANN
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/classic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Classic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/fortran/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fortran
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/hpc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HPC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/inpe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    INPE
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/internals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Internals
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/optimization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Optimization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/pinn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PINN
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/publication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Publication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/virtualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Virtualization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/mkdocs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    mkdocs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-1-wi-fi-drivers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Wi-Fi Drivers
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-the-magic-grub-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: The "Magic" GRUB Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 2: The &#34;Magic&#34; GRUB Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-the-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        üßê Understanding the Parameters
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-reinforcing-the-blacklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Reinforcing the Blacklist
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-disabling-hibernation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Disabling Hibernation
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-fixing-wi-fi-password-loops" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5: Fixing Wi-Fi Password Loops
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-6-preventing-usb-sleep-crashes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 6: Preventing USB Sleep Crashes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-7-ssd-maintenance-and-sensors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 7: SSD Maintenance and Sensors
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 7: SSD Maintenance and Sensors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enable-trim" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enable TRIM
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#safe-sensor-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      
        Safe Sensor Monitoring
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conclusion
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content md-content--post" data-md-component="content">
    <div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner md-post">
          <nav class="md-nav md-nav--primary">
            <div class="md-post__back">
              <div class="md-nav__title md-nav__container">
                <a href="../../../../" class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
                  <span class="md-ellipsis">
                    Back to index
                  </span>
                </a>
              </div>
            </div>
            
            <ul class="md-post__meta md-nav__list">
              <li class="md-nav__item md-nav__item--section">
                <div class="md-post__title">
                  <span class="md-ellipsis">
                    Metadata
                  </span>
                </div>
                <nav class="md-nav">
                  <ul class="md-nav__list">
                    <li class="md-nav__item">
                      <div class="md-nav__link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5z"/></svg>
                        <time datetime="2025-11-26 00:00:00+00:00" class="md-ellipsis">November 26, 2025</time>
                      </div>
                    </li>
                    
                    
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3zm3 2 4 13 3-1-4-13zM5 5v13h3V5zM3 19v2h18v-2z"/></svg>
                          <span class="md-ellipsis">
                            in
                            
                              <a href="../../../../category/linux/">Linux</a></span>
                        </div>
                      </li>
                    
                    
                  </ul>
                </nav>
              </li>
            </ul>
            
          </nav>
          
        </div>
      </div>
    </div>
    <article class="md-content__inner md-typeset">
      
        
  




<h1 id="the-guide-to-stabilizing-linux-on-a-macbook-pro-mid-2012">The Guide to Stabilizing Linux on a MacBook Pro (Mid-2012)</h1>
<p>Installing Linux (specifically Kubuntu 22.04) on a <strong>MacBook Pro 9,2 (Mid-2012 / A1278)</strong> breathes new life into this classic hardware. However, out of the box, users often face a frustrating array of issues: the system freezing upon waking from sleep, random reboots when plugging in power, and crashes after leaving the laptop closed overnight.</p>
<!-- more -->

<p>After extensive debugging and testing, we have arrived at a "Gold Standard" configuration that solves these problems. This guide covers the installation of the proprietary Wi-Fi driver, kernel parameter tuning for the SSD and CPU, disabling problematic hardware features, and fixing USB wake-up conflicts.</p>
<blockquote>
<p>"Hardware Context"<br />
  This guide is optimized for the <strong>MacBook Pro 9,2 (Ivy Bridge i5)</strong> equipped with a generic SSD (e.g., XrayDisk). If you are using a standard HDD or a different SSD brand, the storage parameters are still safe to use and highly recommended for stability.</p>
</blockquote>
<hr />
<h2 id="step-1-wi-fi-drivers">Step 1: Wi-Fi Drivers</h2>
<p>The open-source <code>b43</code> driver often causes instability with the Broadcom BCM4331 chip found in this laptop, specifically regarding power states. For maximum stability and performance, we must switch to the proprietary <code>wl</code> driver.</p>
<p>Open your terminal and run the following commands to ensure the open-source driver is removed and the proprietary one is installed:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 1. Remove the open-source driver and firmware installer</span>
sudo<span class="w"> </span>apt<span class="w"> </span>purge<span class="w"> </span>firmware-b43-installer<span class="w"> </span>b43-fwcutter

<span class="c1"># 2. Install the proprietary Broadcom driver</span>
sudo<span class="w"> </span>apt<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>bcmwl-kernel-source
</code></pre></div>
<p><strong>Reboot your computer</strong> after this step to load the new driver.</p>
<hr />
<h2 id="step-2-the-magic-grub-configuration">Step 2: The "Magic" GRUB Configuration</h2>
<p>This is the most critical step. We need to modify the kernel boot parameters to handle the MacBook's specific hardware quirks, particularly regarding power management, the Thunderbolt controller, and SSD behavior after long sleep.</p>
<ol>
<li>Edit the GRUB configuration file:</li>
</ol>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/default/grub
</code></pre></div>
<ol>
<li>Locate the line starting with <code>GRUB_CMDLINE_LINUX_DEFAULT</code>. Replace the <em>entire line</em> with the following configuration:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nv">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="o">=</span><span class="s2">&quot;quiet splash acpi_osi=Darwin acpi_backlight=video i915.enable_psr=0 i915.reset=1 init_on_alloc=0 mitigations=off module_blacklist=thunderbolt,firewire_ohci,firewire_core,firewire_sbp2 acpi_sleep=nonvs pci=noaer pcie_aspm=off intel_idle.max_cstate=1 scsi_mod.use_blk_mq=1 ahci.mobile_lpm_policy=1 libata.force=noncq&quot;</span>
</code></pre></div>
<ol>
<li>
<p>Save the file (<code>Ctrl+O</code>, <code>Enter</code>) and exit (<code>Ctrl+X</code>).</p>
</li>
<li>
<p><strong>Crucial:</strong> Apply the changes by updating GRUB:</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>update-grub
</code></pre></div>
<h3 id="understanding-the-parameters">üßê Understanding the Parameters</h3>
<p>Why so many options? Here is the breakdown of this "Gold Standard" config:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Function</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong><code>acpi_osi=Darwin</code></strong></td>
<td style="text-align: left;">Exposes macOS-compatible ACPI interfaces, improving hardware recognition.</td>
</tr>
<tr>
<td style="text-align: left;"><strong><code>acpi_backlight=video</code></strong></td>
<td style="text-align: left;">Ensures screen brightness keys work natively with the Intel GPU.</td>
</tr>
<tr>
<td style="text-align: left;"><strong><code>i915.enable_psr=0</code></strong></td>
<td style="text-align: left;">Disables "Panel Self Refresh" to prevent screen flickering and GPU hangs.</td>
</tr>
<tr>
<td style="text-align: left;"><strong><code>module_blacklist=...</code></strong></td>
<td style="text-align: left;">Prevents Thunderbolt/FireWire drivers from loading. These ports cause memory allocation errors and crashes upon wake.</td>
</tr>
<tr>
<td style="text-align: left;"><strong><code>acpi_sleep=nonvs</code></strong></td>
<td style="text-align: left;">Stops Linux from modifying the NVS memory area, preventing conflicts with Apple's BIOS during sleep.</td>
</tr>
<tr>
<td style="text-align: left;"><strong><code>pci=noaer</code></strong></td>
<td style="text-align: left;">Disables Advanced Error Reporting to stop the kernel from panicking over harmless bus errors.</td>
</tr>
<tr>
<td style="text-align: left;"><strong><code>intel_idle.max_cstate=1</code></strong></td>
<td style="text-align: left;"><strong>The anti-freeze fix.</strong> Forces the CPU to stay in a light sleep (C1) state, preventing it from desynchronizing with hardware.</td>
</tr>
<tr>
<td style="text-align: left;"><strong><code>ahci.mobile_lpm_policy=1</code></strong></td>
<td style="text-align: left;">Prevents the SATA controller from cutting SSD power too aggressively during long sleeps.</td>
</tr>
<tr>
<td style="text-align: left;"><strong><code>libata.force=noncq</code></strong></td>
<td style="text-align: left;"><strong>The "Long Sleep" fix.</strong> Disables Native Command Queuing. Essential for budget SSDs that freeze after waking from deep sleep.</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="step-3-reinforcing-the-blacklist">Step 3: Reinforcing the Blacklist</h2>
<p>While we added the blacklist to GRUB, it is best practice to ensure these modules are also blocked at the system level, ensuring they never load during the initial RAM disk boot process.</p>
<ol>
<li>Create a blacklist configuration file:</li>
</ol>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/modprobe.d/blacklist-macbook.conf
</code></pre></div>
<ol>
<li>Paste the following content:</li>
</ol>
<div class="highlight"><pre><span></span><code>blacklist thunderbolt
blacklist firewire_ohci
blacklist firewire_core
blacklist firewire_sbp2
</code></pre></div>
<ol>
<li>Save and exit. Then, update the initial RAM disk (initramfs):</li>
</ol>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>update-initramfs<span class="w"> </span>-u
</code></pre></div>
<hr />
<h2 id="step-4-disabling-hibernation">Step 4: Disabling Hibernation</h2>
<p>Linux hibernation (suspend-to-disk) is notoriously unstable on Macs. Furthermore, Ubuntu attempts a "Hybrid Sleep" after a few hours, which crashes this machine because the SSD fails to wake up from the hibernation attempt. We will force the system to use <strong>only</strong> RAM for sleeping (Suspend-to-RAM).</p>
<ol>
<li>Create a configuration directory and file:</li>
</ol>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/etc/systemd/sleep.conf.d
sudo<span class="w"> </span>nano<span class="w"> </span>/etc/systemd/sleep.conf.d/no-hibernate.conf
</code></pre></div>
<ol>
<li>Paste the following content:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">[Sleep]</span>
<span class="na">AllowHibernation</span><span class="o">=</span><span class="s">no</span>
<span class="na">AllowHybridSleep</span><span class="o">=</span><span class="s">no</span>
<span class="na">AllowSuspendThenHibernate</span><span class="o">=</span><span class="s">no</span>
<span class="na">SuspendState</span><span class="o">=</span><span class="s">mem</span>
</code></pre></div>
<ol>
<li>Save and exit. Reload systemd configuration:</li>
</ol>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>daemon-reload
</code></pre></div>
<hr />
<h2 id="step-5-fixing-wi-fi-password-loops">Step 5: Fixing Wi-Fi Password Loops</h2>
<p>Even with the correct driver, the BCM4331 chip often fails the WPA2 security handshake when Power Saving is enabled, causing the system to repeatedly ask for the Wi-Fi password.</p>
<ol>
<li>Create a NetworkManager configuration file:</li>
</ol>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/NetworkManager/conf.d/99-wifi-powersave-off.conf
</code></pre></div>
<ol>
<li>Paste the following content to permanently disable power saving:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">[connection]</span>
<span class="na">wifi.powersave</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>
</code></pre></div>
<ol>
<li>Save and exit. (This takes effect on reboot).</li>
</ol>
<hr />
<h2 id="step-6-preventing-usb-sleep-crashes">Step 6: Preventing USB Sleep Crashes</h2>
<p>The 2012 MacBook has a hardware bug where USB devices (like ethernet adapters or mice) connected during sleep can confuse the power controller (SMC), causing the system to hang with a pulsing light and unresponsive power button.</p>
<p>We must tell the system <strong>not</strong> to wake up via USB to avoid this conflict.</p>
<ol>
<li>Create a systemd service to disable USB wakeup:</li>
</ol>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/systemd/system/disable-usb-wakeup.service
</code></pre></div>
<ol>
<li>Paste the following content:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">[Unit]</span>
<span class="na">Description</span><span class="o">=</span><span class="s">Disable USB Wakeup to prevent sleep crashes</span>

<span class="k">[Service]</span>
<span class="na">Type</span><span class="o">=</span><span class="s">oneshot</span>
<span class="na">ExecStart</span><span class="o">=</span><span class="s">/bin/sh -c &quot;echo EHC1 &gt; /proc/acpi/wakeup</span><span class="c1">; echo EHC2 &gt; /proc/acpi/wakeup; echo XHC1 &gt; /proc/acpi/wakeup&quot;</span>

<span class="k">[Install]</span>
<span class="na">WantedBy</span><span class="o">=</span><span class="s">multi-user.target</span>
</code></pre></div>
<ol>
<li>Save, exit, and enable the service:</li>
</ol>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>disable-usb-wakeup.service
</code></pre></div>
<hr />
<h2 id="step-7-ssd-maintenance-and-sensors">Step 7: SSD Maintenance and Sensors</h2>
<p>To keep your SSD fast and monitor temperatures safely without crashing the Apple SMC controller.</p>
<h3 id="enable-trim">Enable TRIM</h3>
<p>TRIM helps the SSD manage deleted data blocks.</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>fstrim.timer
</code></pre></div>
<h3 id="safe-sensor-monitoring">Safe Sensor Monitoring</h3>
<p><strong>Do not run <code>sensors-detect</code></strong> on a MacBook. Probing the proprietary Apple SMC bus can freeze the hardware.</p>
<p>Instead, simply install the sensor package and use it directly, as the kernel already includes the correct driver (<code>applesmc</code>):</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>lm-sensors
</code></pre></div>
<p>You can now check temperatures safely by running the command <code>sensors</code> in the terminal.</p>
<hr />
<h2 id="conclusion">Conclusion</h2>
<p>After applying these settings and rebooting, the MacBook Pro 2012 is transformed. You can close the lid with confidence, leave it overnight, and open it the next day to a responsive system with stable Wi-Fi and no crashes.</p>
<p><strong>Summary of Fixes:</strong></p>
<ol>
<li><strong>Wi-Fi:</strong> Proprietary <code>wl</code> driver + Power Save disabled.</li>
<li><strong>Boot/PCI:</strong> GRUB parameters to ignore Thunderbolt and fix memory maps.</li>
<li><strong>Sleep:</strong> C-States limited to C1 + SATA NCQ disabled for SSD stability.</li>
<li><strong>Hardware:</strong> USB wakeup disabled to prevent SMC lockups.</li>
</ol>
<p>Enjoy your rock-solid Linux MacBook!</p>







  
  




  



      
    </article>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      CC BY 4.0 License
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../../../..", "features": ["header.autohide"], "search": "../../../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../../../assets/katex.js"></script>
      
        <script src="../../../../../assets/katex/katex.min.js"></script>
      
        <script src="../../../../../assets/katex/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>